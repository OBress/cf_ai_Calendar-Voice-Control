*,
*::before,
*::after {
  box-sizing: border-box;
}

.popup {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: flex-end;
  justify-content: flex-end;
  padding: 28px;
  opacity: 0;
  transform: translateY(12px) scale(0.96);
  transition: opacity 220ms ease, transform 220ms ease;
  pointer-events: none;
}

.popup--visible {
  opacity: 1;
  transform: translateY(0) scale(1);
  pointer-events: auto;
}

.popup__panel {
  width: min(380px, 100%);
  border-radius: 24px;
  padding: 28px 26px 32px;
  display: flex;
  flex-direction: column;
  gap: 24px;
  background: linear-gradient(145deg, rgba(16, 18, 37, 0.92), rgba(33, 42, 84, 0.75));
  border: 1px solid rgba(255, 255, 255, 0.16);
  box-shadow:
    0 24px 60px rgba(6, 9, 22, 0.65),
    inset 0 1px 0 rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px) saturate(160%);
}

.popup__panel--listening {
  border-color: rgba(119, 209, 255, 0.35);
}

.popup__panel--processing {
  border-color: rgba(140, 163, 255, 0.35);
}

.popup__panel--responding {
  border-color: rgba(173, 255, 204, 0.35);
}

.popup__panel--error {
  border-color: rgba(255, 143, 143, 0.35);
}

.ai-orb {
  width: 128px;
  height: 128px;
  border-radius: 50%;
  margin: 0 auto;
  position: relative;
  background: radial-gradient(circle at 30% 30%, #8df3ff, #4a7bff 55%, #1a1d3f 90%);
  box-shadow:
    0 0 35px rgba(112, 210, 255, 0.65),
    0 0 80px rgba(60, 122, 255, 0.55);
  animation: orbIdle 4s ease-in-out infinite;
}

.ai-orb::before,
.ai-orb::after {
  content: "";
  position: absolute;
  inset: -18px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(108, 173, 255, 0.4), transparent 60%);
  filter: blur(6px);
  opacity: 0.9;
  animation: orbAura 6s ease-in-out infinite;
}

.ai-orb::after {
  inset: -32px;
  opacity: 0.5;
}

.ai-orb--listening {
  animation: orbListening 1.3s ease-in-out infinite;
  box-shadow:
    0 0 40px rgba(108, 219, 255, 0.85),
    0 0 110px rgba(0, 147, 255, 0.6);
}

.ai-orb--processing {
  animation: orbProcessing 0.95s ease-in-out infinite;
  box-shadow:
    0 0 38px rgba(126, 151, 255, 0.8),
    0 0 95px rgba(49, 102, 255, 0.55);
}

.ai-orb--responding {
  animation: orbResponding 2.4s ease-in-out infinite;
  background: radial-gradient(circle at 30% 30%, #b4ffe2, #5ddcc1 55%, #1c2d3f 90%);
  box-shadow:
    0 0 40px rgba(118, 255, 216, 0.8),
    0 0 90px rgba(89, 214, 201, 0.5);
}

.ai-orb--error {
  animation: orbError 1.2s ease-in-out infinite;
  background: radial-gradient(circle at 30% 30%, #ffdfdf, #ff7575 60%, #311b1b 95%);
  box-shadow:
    0 0 35px rgba(255, 149, 149, 0.85),
    0 0 90px rgba(255, 87, 87, 0.4);
}

.status-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  flex-wrap: wrap;
}

.status-pill {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 6px 14px;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.07);
  font-size: 0.82rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: rgba(255, 255, 255, 0.75);
}

.status-pill__dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #7cd0ff;
  box-shadow: 0 0 10px rgba(124, 208, 255, 0.8);
}

.status-pill--processing .status-pill__dot {
  background: #96a4ff;
  box-shadow: 0 0 10px rgba(137, 149, 255, 0.75);
}

.status-pill--responding .status-pill__dot {
  background: #7bffc9;
  box-shadow: 0 0 10px rgba(123, 255, 201, 0.75);
}

.status-pill--error .status-pill__dot {
  background: #ff8585;
  box-shadow: 0 0 10px rgba(255, 133, 133, 0.75);
}

.status-meta {
  font-size: 0.78rem;
  color: rgba(255, 255, 255, 0.5);
}

.response-window {
  min-height: 120px;
  border-radius: 18px;
  padding: 18px 20px;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.08);
  color: #f8fbff;
  font-size: 1.08rem;
  line-height: 1.45;
  white-space: pre-wrap;
  word-break: break-word;
  transition: border-color 200ms ease, background 200ms ease;
}

.popup__panel--listening .response-window,
.popup__panel--processing .response-window {
  color: rgba(255, 255, 255, 0.85);
  font-size: 1rem;
}

.popup__panel--responding .response-window {
  border-color: rgba(123, 255, 205, 0.4);
  background: rgba(123, 255, 205, 0.08);
  color: #f9fffe;
}

.popup__panel--error .response-window {
  border-color: rgba(255, 142, 142, 0.45);
  background: rgba(255, 128, 128, 0.08);
}

.hint {
  font-size: 0.78rem;
  color: rgba(255, 255, 255, 0.45);
}

.hint strong {
  color: rgba(255, 255, 255, 0.78);
  font-weight: 600;
}

@keyframes orbIdle {
  0% {
    transform: scale(0.98);
    opacity: 0.9;
  }
  50% {
    transform: scale(1.02);
    opacity: 1;
  }
  100% {
    transform: scale(0.98);
    opacity: 0.9;
  }
}

@keyframes orbAura {
  0%,
  100% {
    transform: scale(0.95);
    opacity: 0.4;
  }
  50% {
    transform: scale(1.05);
    opacity: 0.8;
  }
}

@keyframes orbListening {
  0% {
    transform: scale(0.92);
  }
  50% {
    transform: scale(1.06);
  }
  100% {
    transform: scale(0.92);
  }
}

@keyframes orbProcessing {
  0% {
    transform: scale(0.94);
  }
  50% {
    transform: scale(1.03);
  }
  100% {
    transform: scale(0.94);
  }
}

@keyframes orbResponding {
  0% {
    transform: scale(0.96);
  }
  40% {
    transform: scale(1.05);
  }
  100% {
    transform: scale(0.96);
  }
}

@keyframes orbError {
  0%,
  100% {
    transform: scale(0.93);
  }
  50% {
    transform: scale(1.04);
  }
}

